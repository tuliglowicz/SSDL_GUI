<?xml version="1.0" encoding="utf-8"?>
<graph xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="file:///C:/Dropbox/SOA%20XML/Workflow%20Engine/SmartServiceExecutionGraph.xsd">
	<nodes>
		<node>
			<nodeId>#Start</nodeId>
			<nodeType>Control</nodeType>
			<controlType>#start</controlType>
			<nodeLabel>#Start</nodeLabel>
			<physicalDescription>
				<serviceName/>
				<serviceGlobalId/>
				<address/>
				<operation/>
			</physicalDescription>
			<condition/>
			<sources>
				<source/>
			</sources>
			<functionalDescription>
				<description>Start node</description>
				<serviceClasses/>
				<metaKeywords/>
				<inputs/>
				<outputs>
					<output>
						<class>Object</class>
						<id>MonitoredObject</id>
						<label>MonitoredObject</label>
						<dataType>Object</dataType>
						<properties/>
					</output>
					<output>
						<class>Message</class>
						<id>BuildingMonitoringStarted</id>
						<label>BuildingMonitoringStarted</label>
						<dataType>Message</dataType>
						<properties/>
					</output>
				</outputs>
				<preconditions/>
				<effects/>
			</functionalDescription>
			<nonFunctionalDescription>
				<nonFunctionalProperty>
					<weight>1</weight>
					<name>location</name>
					<relation>eq</relation>
					<unit>district</unit>
					<value>srodmiescie</value>
				</nonFunctionalProperty>
			</nonFunctionalDescription>
			<alternatives/>
			<subGraph/>
		</node>
		<node>
			<nodeId>#End</nodeId>
			<nodeType>Control</nodeType>
			<controlType>#end</controlType>
			<nodeLabel>#End</nodeLabel>
			<physicalDescription>
				<serviceName/>
				<serviceGlobalId/>
				<address/>
				<operation/>
			</physicalDescription>
			<condition/>
			<sources>
				<source>id001</source>
			</sources>
			<functionalDescription>
				<serviceClasses/>
				<description>End node</description>
				<metaKeywords/>
				<inputs>
					<input>
						<class>Video</class>
						<id>InputVideo</id>
						<label>InputVideo</label>
						<dataType>VideoData</dataType>
						<properties/>
						<source/>
					</input>
				</inputs>
				<outputs/>
				<preconditions/>
				<effects/>
			</functionalDescription>
			<nonFunctionalDescription>
				<nonFunctionalProperty>
					<weight>1</weight>
					<name>location</name>
					<relation>eq</relation>
					<unit>district</unit>
					<value>srodmiescie</value>
				</nonFunctionalProperty>
			</nonFunctionalDescription>
			<alternatives/>
			<subGraph/>
		</node>
		<!-- Pierwszy wierzchoÅ‚ek z procesu -->
		<node>
			+|*<nodeId>CCTVStartMonitoring</nodeId>
			+|*<nodeType>EmulationService</nodeType>
			+|*<nodeLabel>CCTVStartMonitoring</nodeLabel>
			+|service<physicalDescription>
				<serviceName/>
				<serviceGlobalId/>
				<address/>
				<operation/>
			         </physicalDescription>
			|^control<functionalDescription>
				<serviceClasses>
					<serviceClass>Monitoring</serviceClass>
				</serviceClasses>
				<description>Service starting the monitoring process</description>
				<metaKeywords>
					<metaKeyword>Monitoring</metaKeyword>
				</metaKeywords>
				<inputs>
					<input>
						<class>Message</class>
						<id>InputBuildingMonitoringStarted</id>
						<label>InputBuildingMonitoringStarted</label>
						<dataType>Message</dataType>
						<properties/>
					</input>
					<input>
						<class>Object</class>
						<id>InputMonitoredObject</id>
						<label>InputMonitoredObject</label>
						<dataType>Object</dataType>
						<properties/>
					</input>
				</inputs>
				<outputs>
					<output>
						<class>VideoSensor</class>
						<id>VideoSensor</id>
						<label>VideoSensor</label>
						<dataType>Sensor</dataType>
						<properties/>
					</output>
					<output>
						<class>MotionSensor</class>
						<id>MotionSensor</id>
						<label>MotionSensor</label>
						<dataType>Sensor</dataType>
						<properties/>
					</output>
					<output>
						<class>Message</class>
						<id>CCTVMonitoringStarted</id>
						<label>CCTVMonitoringStarted</label>
						<dataType>Message</dataType>
						<properties/>
					</output>
				</outputs>
				<preconditions/>
				<effects/>
					 </functionalDescription>
			+|^control<nonFunctionalDescription>
						<nonFunctionalProperty>
							<weight>1</weight>
							<name>location</name>
							<relation>eq</relation>
							<unit>district</unit>
							<value>srodmiescie</value>
						</nonFunctionalProperty>
					 </nonFunctionalDescription>
			~|^control<alternatives/>
			+|service<subGraph/>
			|control <controlType/>
			| ???<condition/>
			|^control#"#Start"<sources>

				<source>#Start</source>
							  </sources>
		</node>
		<!--MAPOWANIE -->	
		<node>
			<nodeId>id001</nodeId>
			<nodeType>StreamingWorkflowEngine</nodeType>
			<nodeLabel>CCTVSendStart</nodeLabel>
			<physicalDescription>
				<serviceName>StreamingWorkflowEnigne</serviceName>
				<serviceGlobalId>www.platel.pl/streamingworkflowengine</serviceGlobalId>
				<address>www.platel.pl/streamingworkflowengine</address>
				<operation>execute</operation>
			</physicalDescription>
			
			<functionalDescription>
				<serviceClasses>
					<serviceClass>Process</serviceClass>
				</serviceClasses>
				<description>Service for sending the video from CCTV monitoring</description>
				<metaKeywords>
					<metaKeyword>Send</metaKeyword>
				</metaKeywords>
				<inputs>
					<input>
						<class>VideoSensor</class>
						<id>VideoSensor</id>
						<label>VideoSensor</label>
						<dataType>Sensor</dataType>
						<properties/>
						<source>
							<nodeId>CCTVStartMonitoring</nodeId>
							<outputId>VideoSensor</outputId>
						</source>						
					</input>
					<input>
						<class>MotionSensor</class>
						<id>MotionSensor</id>
						<label>MotionSensor</label>
						<dataType>Sensor</dataType>
						<properties/>
						<source>
							<nodeId>CCTVStartMonitoring</nodeId>
							<outputId>MotionSensor</outputId>
						</source>
					</input>
				</inputs>
				<outputs>
					<output>
						<class>Video</class>
						<id>OutputVideo</id>
						<label>OutputVideo</label>
						<dataType>VideoData</dataType>
						<properties/>
					</output>
				</outputs>
				<preconditions/>
				<effects/>
			</functionalDescription>
			<nonFunctionalDescription>
				<nonFunctionalProperty>
					<weight>1</weight>
					<name>location</name>
					<relation>eq</relation>
					<unit>district</unit>
					<value>srodmiescie</value>
				</nonFunctionalProperty>
			</nonFunctionalDescription>
			<alternatives/>
			<subGraph>
				<nodes>
					<node>
						<nodeId>#Start</nodeId>
						<nodeLabel>#Start</nodeLabel>
						<nodeType>Control</nodeType>
						<controlType>#start</controlType>
						<physicalDescription>
							<serviceName/>
							<serviceGlobalId/>
							<address/>
							<operation/>
						</physicalDescription>
						<condition/>
						<sources>
							<source/>
						</sources>
						<functionalDescription>
							<serviceClasses/>
							<description>Start node</description>
							<metaKeywords/>
							<inputs/>
							<outputs>
								<output>
									<class>VideoSensor</class>
									<id>VideoSensor</id>
									<label>VideoSensor</label>
									<dataType>Sensor</dataType>
									<properties/>					
								</output>
								<output>
									<class>MotionSensor</class>
									<id>MotionSensor</id>
									<label>MotionSensor</label>
									<dataType>Sensor</dataType>
									<properties/>
								</output>
							</outputs>
							<preconditions/>
							<effects/>
						</functionalDescription>
						<nonFunctionalDescription>
							<nonFunctionalProperty>
								<weight>1</weight>
								<name>location</name>
								<relation>eq</relation>
								<unit>district</unit>
								<value>srodmiescie</value>
							</nonFunctionalProperty>
						</nonFunctionalDescription>
						<alternatives/>
						<subGraph/>
					</node>
					<node>
						<nodeId>#End</nodeId>
						<nodeLabel>#End</nodeLabel>
						<nodeType>Control</nodeType>
						<controlType>#end</controlType>
						<physicalDescription>
							<serviceName/>
							<serviceGlobalId/>
							<address/>
							<operation/>
						</physicalDescription>
						<condition/>
						<sources>
							<source>DecryptionStart</source>
						</sources>
						<functionalDescription>
							<serviceClasses/>
							<description>End node</description>
							<metaKeywords/>
							<inputs>
								<input>
									<class>Video</class>
									<id>InputVideo</id>
									<label>InputVideo</label>
									<dataType>VideoData</dataType>
									<properties/>
									<source>
										<nodeId>DecryptionStart</nodeId>
										<outputId>OutputVideo</outputId>
									</source>
								</input>
							</inputs>
							<outputs/>
							<preconditions/>
							<effects/>
						</functionalDescription>
						<nonFunctionalDescription>
							<nonFunctionalProperty>
								<weight>1</weight>
								<name>location</name>
								<relation>eq</relation>
								<unit>district</unit>
								<value>srodmiescie</value>
							</nonFunctionalProperty>
						</nonFunctionalDescription>
						<alternatives/>
						<subGraph/>
					</node>
					<node>
						<nodeId>CodingStart</nodeId>
						<nodeLabel>CodingStart</nodeLabel>
						<nodeType>Service</nodeType>
						<physicalDescription>
							<serviceName>PAL to MPEG-1 (25fps 1.5 Mb/s BW) Video coding</serviceName>
							<serviceGlobalId>http://www.monitoring.pwr.wroc.pl/computation/video_coding_srodmiescie_1_mpeg1_bw</serviceGlobalId>
							<address>http://www.monitoring.pwr.wroc.pl/computation/video_coding_srodmiescie_1_mpeg1_bw.wsdl</address>
							<operation>codingWithMPEG1bw</operation>
						</physicalDescription>
						<functionalDescription>
							<serviceClasses>
								<serviceClass>StartVideoCodingService</serviceClass>
							</serviceClasses>
							<description>Video stream coding in CCTV monitoring</description>
							<metaKeywords>
								<metaKeyword>Video</metaKeyword>
								<metaKeyword>Coding</metaKeyword>
							</metaKeywords>
							<inputs>
								<input>
									<class>VideoSensor</class>
									<id>VideoSensor</id>
									<label>VideoSensor</label>
									<dataType>Sensor</dataType>
									<properties/>
									<source>
										<nodeId>#Start</nodeId>
										<outputId>VideoSensor</outputId>
									</source>						
								</input>
								<input>
									<class>MotionSensor</class>
									<id>MotionSensor</id>
									<label>MotionSensor</label>
									<dataType>Sensor</dataType>
									<properties/>
									<source>
										<nodeId>#Start</nodeId>
										<outputId>MotionSensor</outputId>
									</source>
								</input>
							</inputs>
							<outputs>
								<output>
									<class>Video</class>
									<id>OutputVideo</id>
									<label>OutputVideo</label>
									<dataType>VideoData</dataType>
									<properties/>
								</output>
							</outputs>
							<preconditions/>
							<effects/>
						</functionalDescription>
						<nonFunctionalDescription>
							<nonFunctionalProperty>
								<weight>1</weight>
								<name>location</name>
								<relation>eq</relation>
								<unit>district</unit>
								<value>srodmiescie</value>
								<weight>1</weight>
							</nonFunctionalProperty>
							<nonFunctionalProperty>
								<weight>1</weight>
								<unit>$</unit>
								<value>1</value>
								<relation>eq</relation>
								<name>cost</name>
							</nonFunctionalProperty>
						</nonFunctionalDescription>
						<controlType/>
						<condition/>
						<sources>
							<source>#Start</source>
						</sources>
					</node>
					<!-- VIDEO (coded) ENCRYPTION -->
					<node>
						<nodeId>EncryptionStart</nodeId>
						<nodeLabel>EncryptionStart</nodeLabel>
						<nodeType>Service</nodeType>
						<physicalDescription>
							<serviceName>RSA Encryption Service</serviceName>
							<serviceGlobalId>http://www.monitoring.pwr.wroc.pl/computation/encryption_srodmiescie_1</serviceGlobalId>
							<address>http://www.monitoring.pwr.wroc.pl/computation/encryption_srodmiescie_1.wsdl</address>
							<operation>encryptWithRSA</operation>
						</physicalDescription>
						<functionalDescription>
							<serviceClasses>
								<serviceClass>StartEncryptionService</serviceClass>
							</serviceClasses>
							<description>Video stream encryption</description>
							<metaKeywords>
								<metaKeyword>Video</metaKeyword>
								<metaKeyword>Encryption</metaKeyword>
							</metaKeywords>
							<inputs>
								<input>
									<class>Video</class>
									<id>InputVideo</id>
									<label>InputVideo</label>
									<dataType>VideoData</dataType>
									<properties/>
									<source>
										<nodeId>CodingStart</nodeId>
										<outputId>OutputVideo</outputId>
									</source>
								</input>
							</inputs>
							<outputs>
								<output>
									<class>Video</class>
									<id>OutputVideo</id>
									<label>OutputVideo</label>
									<dataType>VideoData</dataType>
									<properties/>
								</output>
							</outputs>
							<preconditions/>
							<effects/>
						</functionalDescription>
						<nonFunctionalDescription>
							<nonFunctionalProperty>
								<weight>1</weight>
								<name>location</name>
								<relation>eq</relation>
								<unit>district</unit>
								<value>srodmiescie</value>
								<weight>1</weight>
							</nonFunctionalProperty>
							<nonFunctionalProperty>
								<weight>1</weight>
								<unit>$</unit>
								<value>1</value>
								<relation>eq</relation>
								<name>cost</name>
							</nonFunctionalProperty>
						</nonFunctionalDescription>
						<controlType/>
						<condition/>
						<sources>
							<source>CodingStart</source>
						</sources>
					</node>
					<!--VIDEO (coded, encrypted) TRANSMISSION -->
					<node>
						<nodeId>TransmissionStart</nodeId>
						<nodeLabel>TransmissionStart</nodeLabel>
						<nodeType>Service</nodeType>
						<physicalDescription>
							<serviceName>Transmission Ethernet 100Mb</serviceName>
							<serviceGlobalId>http://www.monitoring.pwr.wroc.pl/computation/transmission_srodmiescie_1_ethernet</serviceGlobalId>
							<address>http://www.monitoring.pwr.wroc.pl/computation/transmission_srodmiescie_1_ethernet.wsdl</address>
							<operation>Transmission</operation>
						</physicalDescription>
						<functionalDescription>
							<serviceClasses>
								<serviceClass>StartTransmissionService</serviceClass>
							</serviceClasses>
							<description>Video stream transmission</description>
							<metaKeywords>
								<metaKeyword>Video</metaKeyword>
								<metaKeyword>Transmission</metaKeyword>
							</metaKeywords>
							<inputs>
								<input>
									<class>Video</class>
									<id>InputVideo</id>
									<label>InputVideo</label>
									<dataType>VideoData</dataType>
									<properties/>
									<source>
										<nodeId>EncryptionStart</nodeId>
										<outputId>OutputVideo</outputId>
									</source>
								</input>
							</inputs>
							<outputs>
								<output>
									<class>Video</class>
									<id>OutputVideo</id>
									<label>OutputVideo</label>
									<dataType>VideoData</dataType>
									<properties/>
								</output>
							</outputs>
							<preconditions/>
							<effects/>
						</functionalDescription>
						<nonFunctionalDescription>
							<nonFunctionalProperty>
								<weight>1</weight>
								<name>location</name>
								<relation>eq</relation>
								<unit>district</unit>
								<value>srodmiescie</value>
							</nonFunctionalProperty>
							<nonFunctionalProperty>
								<weight>1</weight>
								<unit>$</unit>
								<value>1</value>
								<relation>eq</relation>
								<name>cost</name>
							</nonFunctionalProperty>
						</nonFunctionalDescription>
						<controlType/>
						<condition/>
						<sources>
							<source>EncryptionStart</source>
						</sources>
					</node>
					<!--VIDEO DECRYPTION -->
					<node>
						<nodeId>DecryptionStart</nodeId>
						<nodeLabel>DecryptionStart</nodeLabel>
						<nodeType>Service</nodeType>
						<physicalDescription>
							<serviceName>RSA decryption</serviceName>
							<serviceGlobalId>http://www.monitoring.pwr.wroc.pl/computation/decryption_srodmiescie_1</serviceGlobalId>
							<address>http://www.monitoring.pwr.wroc.pl/computation/decryption_srodmiescie_1.wsdl</address>
							<operation>dencryptWithRSA</operation>
						</physicalDescription>
						<functionalDescription>
							<serviceClasses>
								<serviceClass>StartDecryptionService</serviceClass>
							</serviceClasses>
							<description>Video stream decryption</description>
							<metaKeywords>
								<metaKeyword>Video</metaKeyword>
								<metaKeyword>Decryption</metaKeyword>
							</metaKeywords>
							<inputs>
								<input>
									<class>Video</class>
									<id>InputVideo</id>
									<label>InputVideo</label>
									<dataType>VideoData</dataType>
									<properties/>
									<source>
										<nodeId>TransmissionStart</nodeId>
										<outputId>OutputVideo</outputId>
									</source>
								</input>
							</inputs>
							<outputs>
								<output>
									<class>Video</class>
									<id>OutputVideo</id>
									<label>OutputVideo</label>
									<dataType>VideoData</dataType>
									<properties/>
								</output>
							</outputs>
							<preconditions/>
							<effects/>
						</functionalDescription>
						<nonFunctionalDescription>
							<nonFunctionalProperty>
								<weight>1</weight>
								<name>location</name>
								<relation>eq</relation>
								<unit>district</unit>
								<value>srodmiescie</value>
								<weight>1</weight>
							</nonFunctionalProperty>
							<nonFunctionalProperty>
								<weight>1</weight>
								<unit>$</unit>
								<value>1</value>
								<relation>eq</relation>
								<name>cost</name>
							</nonFunctionalProperty>
						</nonFunctionalDescription>
						<controlType/>
						<condition/>
						<sources>
							<source>TransmissionStart</source>
						</sources>
					</node>
				</nodes>
				<inputVariables>
			    </inputVariables>
				<nonFunctionalParameters>
					<nonFunctionalProperty>
						<weight>1</weight>
						<unit>$</unit>
						<value>6</value>
						<relation>lt</relation>
						<name>cost</name>
					</nonFunctionalProperty>
				</nonFunctionalParameters>
				<parameters/>
				<exceptions/>
			</subGraph>
			<controlType/>
			<condition/>
			<sources>
				<source>CCTVStartMonitoring</source>
			</sources>
		</node>
	</nodes>
	<inputVariables>
		<inputVariable>
            <name>user_firstname</name>
            <value>Jan</value>
            <type>String</type>
        </inputVariable>
		<inputVariable>
            <name>user_surname</name>
            <value>Kowalski</value>
            <type>String</type>
        </inputVariable>
    </inputVariables>
	<nonFunctionalParameters>
		<nonFunctionalProperty>
			<weight>1</weight>
			<unit>$</unit>
			<value>10</value>
			<relation>lt</relation>
			<name>cost</name>
		</nonFunctionalProperty>
	</nonFunctionalParameters>
	<parameters/>
	<exceptions/>
</graph>