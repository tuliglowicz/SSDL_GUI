<!DOCTYPE html>
<html>
<head>
	<META charset="UTF-8"/>
	<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
	<title>Interface</title>
	<script src="javascripts/jquery-1.7.2.js"></script>
	<script src="javascripts/jquery-ui-1.8.16.custom.min.js"></script>
	<script src="javascripts/raphael.js"></script>
	<script src="javascripts/shortcut.js"></script>
	<script src="javascripts/ontology.js"></script>
	<script src="javascripts/jquery.tinyscrollbar.js"></script>
	<script src="javascripts/Slider2.js"></script>
	<script src="library.js"></script>
	<script src="controler.js"></script>
	<script src="view.js"></script>
	<link href="stylesheets/my_style.css" rel="stylesheet">
	<link type="text/css" href="stylesheets/jquery-ui-1.8.19.custom.css" rel="stylesheet" />
	<style>
		#acc_inside{
			height: 200px;
		}
		.clickable{
			cursor: pointer;
		}
		.textfield{
			width: 135px;
			height: 17px;
		}
	</style>
</head>
<body>
	
<div id="sandbox" style="background-color:ivory;"> </div>
<div id="raport" style='clear: both; display:block;'> </div>
<div id="form" class="ui-dialog-content ui-widget-content" title="New SSDL node">
	<div id="tabs" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
		<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
			<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active" id="mainTab"><a href="#tabs-1">Main</a></li>
			<li id="physicalDescriptionTab"><a href="#tabs-2">Service description</a></li>
			<li id="inputOutputTab"><a href="#tabs-3">Inputs and outputs</a></li>
			<li id="nonFunctionalDescriptionTab"><a href="#tabs-4">Non-functional description</a></li>
		</ul>
		<div id="tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom">
			<p>
				<form id="mainForm">
					<table>
						<tr>
							<td><label for="f_mainTab_label">Label: </label></td>
							<td><input type="text" name="f_mainTab_label" id="f_mainTab_label" value="" class="text ui-widget-content ui-corner-all textfield"/></td>
						</tr>
						
					<!-- <tr>
							<td><label for="f_mainTab_nodeType">NodeType: </label></td>
							<td><select style="width: 135px;" id="f_mainTab_nodeType" class="ui-widget-content ui-corner-all ui-combobox">
								<option class="ui-widget ui-state-default" selected="selected">  </option>
								<option class="ui-widget ui-state-default" value="Control">Control</option>
								<option class="ui-widget ui-state-default" value="Functionality">Functionality</option>
								<option class="ui-widget ui-state-default" value="Mediator">Mediator</option>
								<option class="ui-widget ui-state-default" value="Service">Service</option>
							</select></td>
							
						</tr>
						
						<tr>
							<td><label for="f_mainTab_condition">Condition: if </label></td>
							<td><input type="text" name="f_mainTab_condition" id="f_mainTab_condition" value="" class="text ui-widget-content ui-corner-all"/></td>
							<td><label for="f_mainTab_conditionTRUE">then </label></td>
							<td><input type="text" name="f_mainTab_conditionTRUE" id="f_mainTab_conditionTRUE" value="" class="text ui-widget-content ui-corner-all"/></td>
							<td><label for="f_mainTab_conditionFALSE">else </label></td>
							<td><input type="text" name="f_mainTab_conditionFALSE" id="f_mainTab_conditionFALSE" value="" class="text ui-widget-content ui-corner-all"/></td>
						</tr>						
						<tr>
							</br></br><td><label for="f_mainTab_alternatives">Alternatives: </label></td>
							<td><input type="text" name="f_mainTab_alternatives" id="f_mainTab_alternatives" value="" class="text ui-widget-content ui-corner-all"/></td>
						
							<td><label for="f_mainTab_subgraph">Subgraph: </label></td>
							<td><input type="text" name="f_mainTab_subgraph" id="subgraph" value="" class="text ui-widget-content ui-corner-all"/></td> 
						</tr>
						
						<tr>
							<td><label for="f_mainTab_source">Sources: </label></td>
							<td><input type="text" name="f_mainTab_source" id="f_mainTab_source" value="" class="text ui-widget-content ui-corner-all"/></td>
							<td><input type="submit" name="f_button_addSource" id="f_button_addSource" value="Add Source"/></td>
							<td><small>click on a source to delete it</small></td>
						</tr>
						ten span był dalej (pod tabelami), ale to teraz nieważne
						<span id="f_mainTab_sources"></span>
					-->
						<tr>
							<td><label for="f_mainTab_description">Description: </label></td>
							<td><textarea rows='1' cols='20' name="f_mainTab_description" id="f_mainTab_description" value="" class="text ui-widget-content ui-corner-all textfield" style="height: 20px; resize:none"/></textarea></td>
							<td><span id="f_mainTab_moar" class="clickable" style="color: navy; font-size: 0.85em" >more...</span></td>
						</tr>
						<tr>
							<td><label for="f_mainTab_controlType">ControlType: </label></td>
							<td><input type="text" name="f_mainTab_controlType" id="f_mainTab_controlType" value="" class="text ui-widget-content ui-corner-all textfield"/></td>
						</tr>
						<tr>
							<td><label for="f_mainTab_serviceClass">Service Classes: </label></td>
							<td><input type="text" name="f_mainTab_serviceClass" id="f_mainTab_serviceClass" value="" class="text ui-widget-content ui-corner-all textfield"/></td>
							<td><input type="submit" name="f_button_addServiceClass" id="f_button_addServiceClass" value="Add Service Class"/></td>
							<td><span id="f_mainTab_scInfo"><small>click on a service class to delete it</small></span></td>
						</tr>
					</table>
					<span id="f_mainTab_sClasses"></span>
				</form>
				<button id="f_mainTab_nextButton" style="float:right">NEXT</button>
			</p>
		</div>
		<div id="tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom">
			<p>
				<form id="physDescForm">
					<table>
						<tr>
							<td><label for="f_physicalDescriptionTab_address">Address: </label></td>
							<td><input type="text" name="f_physicalDescriptionTab_address" id="f_physicalDescriptionTab_address" value="" class="text ui-widget-content ui-corner-all textfield"/></td>
						</tr>
						<tr>
							<td><label for="f_physicalDescriptionTab_serviceName">ServiceName: </label></td>
							<td><input type="text" name="f_physicalDescriptionTab_serviceName" id="f_physicalDescriptionTab_serviceName" value="" class="text ui-widget-content ui-corner-all textfield"/></td>
						</tr>
						<tr>
							<td><label for="f_physicalDescriptionTab_serviceGlobalId">ServiceGlobalId: </label></td>
							<td><input type="text" name="f_physicalDescriptionTab_serviceGlobalId" id="f_physicalDescriptionTab_serviceGlobalId" value="" class="text ui-widget-content ui-corner-all textfield"/></td>
						</tr>
						<tr>
							<td><label for="f_physicalDescriptionTab_operation">Operation: </label></td>
							<td><input type="text" name="f_physicalDescriptionTab_operation" id="f_physicalDescriptionTab_operation" value="" class="text ui-widget-content ui-corner-all textfield"/></td>
						</tr>
					</table>
				</form>
				<button id="f_physicalDescriptionTab_backButton" style="float: left">BACK</button>
				<button id="f_physicalDescriptionTab_nextButton" style="float: right">NEXT</button>
			</p>
		</div>
		<div id="tabs-3" class="ui-tabs-panel ui-widget-content ui-corner-bottom">
			<p>
				<form id="funcDescForm">
				
					<!--
					<table>
						<tr>
							<td><label for="f_inputOutputTab_metaKeyword">Meta Keywords: </label></td>
							<td><input type="text" name="f_inputOutputTab_metaKeyword" id="f_inputOutputTab_metaKeyword" value="" class="text ui-widget-content ui-corner-all"/></td>
							<td><input type="submit" name="f_button_addMetaKeyword" id="f_button_addMetaKeyword" value="Add Meta Keyword"/></td>
							<td><small>click on a meta keyword to delete it</small></td>
						</tr>							
					</table>
					-->
				</form>
				<span id="f_inputOutputTab_mKeywords"></span>
				<div id="functionalAcc1">
					<h3><a href="#">Inputs</a></h3>
					<div id="acc_inside">
						<form id="inputForm">
							<table>
								<tr>
									<td><label for="f_inputOutputTab_inputId">Id: </label></td>
									<td><input type="text" name="f_inputOutputTab_inputId" id="f_inputOutputTab_inputId" value="" class="text ui-widget-content ui-corner-all"/></td>
								
									<td><label for="f_inputOutputTab_inputLabel">Label: </label></td>
									<td><input type="text" name="f_inputOutputTab_inputLabel" id="f_inputOutputTab_inputLabel" value="" class="text ui-widget-content ui-corner-all"/></td>
								</tr>
								<tr>
									<td><label for="f_inputOutputTab_inputClass">Class: </label></td>
									<td><input type="text" name="f_inputOutputTab_inputClass" id="f_inputOutputTab_inputClass" value="" class="text ui-widget-content ui-corner-all"/></td>
									
									<td><label for="f_inputOutputTab_inputDataType">DataType: </label></td>
									<td><input type="text" name="f_inputOutputTab_inputDataType" id="f_inputOutputTab_inputDataType" value="" class="text ui-widget-content ui-corner-all"/></td>
								</tr>
								
								<!--
								<tr>
									<td><label for="f_inputOutputTab_inputProperties">Properties: </label></td>
									<td><input type="text" name="f_inputOutputTab_inputProperties" id="f_inputOutputTab_inputProperties" value="" class="text ui-widget-content ui-corner-all"/></td>
								</tr>
								-->

								<tr>
									<td><input type="submit" name="f_button_addInputButton" id="f_button_addInputButton" value="Add input"/></td>
									<td><input type="reset" name="f_button_clearInputButton" id="f_button_clearInputButton" value="Reset"/></td>
								</tr>
							</table>
						</form>
						<div id="inputs-content" class="ui-widget">
							<p>Defined inputs:</p>
							<table id="f_inputOutputTab_inputs" class="text ui-widget-content ui-corner-all">
								<thead>
									<tr class="ui-widget-header ">
										<th>Id</th>
										<th>Label</th>
										<th>Class</th>
										<th>DataType</th>
										<th>Properties</th>
										<th>Action</th>
									</tr>
								</thead>
								<tbody>
									<tr>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<div id="functionalAcc2">
					<h3><a href="#">Outputs</a></h3>
					<div id="acc_inside">
						<form id="outputForm">
							<table>
								<tr>
									<td><label for="f_inputOutputTab_outputId">NodeId: </label></td>
									<td><input type="text" name="f_inputOutputTab_outputId" id="f_inputOutputTab_outputId" value="" class="text ui-widget-content ui-corner-all"/></td>
										
									<td><label for="f_inputOutputTab_outputLabel">Label: </label></td>
									<td><input type="text" name="f_inputOutputTab_outputLabel" id="f_inputOutputTab_outputLabel" value="" class="text ui-widget-content ui-corner-all"/></td>
								</tr>
								<tr>
									<td><label for="f_inputOutputTab_outputClass">Class: </label></td>
									<td><input type="text" name="f_inputOutputTab_outputClass" id="f_inputOutputTab_outputClass" value="" class="text ui-widget-content ui-corner-all"/></td>
								
									<td><label for="f_inputOutputTab_outputDataType">DataType: </label></td>
									<td><input type="text" name="f_inputOutputTab_outputDataType" id="f_inputOutputTab_outputDataType" value="" class="text ui-widget-content ui-corner-all"/></td>
								</tr>
								<!--
								<tr>
									<td><label for="f_inputOutputTab_outputProperties">Properties: </label></td>
									<td><input type="text" name="f_inputOutputTab_outputProperties" id="f_inputOutputTab_outputProperties" value="" class="text ui-widget-content ui-corner-all"/></td>
								</tr>
								-->
								<tr>
									<td><input type="submit" name="f_button_addOutputButton" id="f_button_addOutputButton" value="Add output"/></td>
									<td><input type="reset" name="f_button_clearOutputButton" id="f_button_clearOutputButton" value="Reset"/></td>
								</tr>
							</table>
						</form>		
						<div id="outputs-content" class="ui-widget">
							<p>Defined outputs:</p>
							<table id="f_inputOutputTab_outputs" class="text ui-widget-content ui-corner-all">
								<thead>
									<tr class="ui-widget-header ">
										<th>Id</th>
										<th>Label</th>
										<th>Class</th>
										<th>DataType</th>
										<th>Properties</th>
										<th>Action</th>
									</tr>
								</thead>
								<tbody>
									<tr>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>	
				<!--
				<table>
					<tr>
						<td><label for="f_inputOutputTab_preconditions">Preconditions: </label></td>
						<td><input type="text" name="f_inputOutputTab_preconditions" id="f_inputOutputTab_preconditions" value="" class="text ui-widget-content ui-corner-all"/></td>
							
						<td><label for="f_inputOutputTab_effects">Effects: </label></td>
						<td><input type="text" name="f_inputOutputTab_effects" id="f_inputOutputTab_effects" value="" class="text ui-widget-content ui-corner-all"/></td>
					</tr>
				</table>
				-->
			<button id="f_inputOutputTab_backButton" style="float: left">BACK</button>
			<button id="f_inputOutputTab_nextButton" style="float: right">NEXT</button>
			</p>
		</div>
		<div id="tabs-4" class="ui-tabs-panel ui-widget-content ui-corner-bottom">
			<p>
				<form id="nonFuncDescForm">
					<table>
						<tr>
							<td><label for="f_nonFunctionalDescriptionTab_">Weight:</label></td>
							<td><input type="text" name="f_nonFunctionalDescriptionTab_weight" id="f_nonFunctionalDescriptionTab_weight" value="" class="text ui-widget-content ui-corner-all textfield"/></td>
						
							<td><label for="f_nonFunctionalDescriptionTab_name">Name: </label></td>
							<td><input type="text" name="f_nonFunctionalDescriptionTab_name" id="f_nonFunctionalDescriptionTab_name" value="" class="text ui-widget-content ui-corner-all textfield"/></td>
						</tr>
						<tr>
							<td><label for="f_nonFunctionalDescriptionTab_relation">Relation: </label></td>
							<td><input type="text" name="f_nonFunctionalDescriptionTab_relation" id="f_nonFunctionalDescriptionTab_relation" value="" class="text ui-widget-content ui-corner-all textfield"/></td>
								
							<td><label for="f_nonFunctionalDescriptionTab_unit">Unit: </label></td>
							<td><input type="text" name="f_nonFunctionalDescriptionTab_unit" id="f_nonFunctionalDescriptionTab_unit" value="" class="text ui-widget-content ui-corner-all textfield"/></td>
						</tr>
						<tr>
							<td><label for="f_nonFunctionalDescriptionTab_value">Value: </label></td>
							<td><input type="text" name="f_nonFunctionalDescriptionTab_value" id="f_nonFunctionalDescriptionTab_value" value="" class="text ui-widget-content ui-corner-all textfield"/></td>
						</tr>
					</table>
					<table>
						<tr>
							<td><input type="submit" name="f_button_addNonFunctional" id="f_button_addNonFunctional" value="Add nonfunctional property"/></td>
							<td><input type="reset" name="f_button_clearNonFunctional" id="f_button_clearNonFunctional" value="Reset"/></td>
						</tr>
					</table>
				</form>
				<div id="nonFunctionalProperties-content" class="ui-widget">
				<p>Defined Non Functional Properties:</p>
					<table id="f_nonFunctionalDescriptionTab_NFProps" class="text ui-widget-content ui-corner-all">
						<thead>
							<tr class="ui-widget-header ">
								<th>Weight</th>
								<th>Name</th>
								<th>Relation</th>
								<th>Unit</th>
								<th>Value</th>
								<th>Action</th>
							</tr>
						</thead>
						<tbody>
							<tr>	
							</tr>
						</tbody>
					</table>
				</div>
				<button id="f_nonFunctionalDescriptionTab_backButton" style="float: left">BACK</button>
			</p>
		</div>
	</div>
	<input type="submit" name="f_button_sumbitAllButton" id="f_button_sumbitAllButton" value="Submit all"/>
	<input type="reset" name="f_button_resetAllButton" id="f_button_resetAllButton" value="Reset all"/>
	<p id="buglist" color="red"><p/>
</div>

<script>
	"use strict";
	
	// pomocnicze skrĂłty
	var a = alert;
	var jstr = JSON.stringify;
	// eof pomocnicze skrĂłty

	var modules = ["historyTree", "blanks", "miniature", "subgraphTree", "repository"];
	var A = Graph_GUI("sandbox", 1200, 600, modules, "list.xml");

	function Graph_GUI(id, width, height, modules, url){
		var r = {};
		
		r.id_postfix = Math.round( Math.random() * 10e5 );
		r.view = View(id, width, height, r);
		r.view.blankNodes.init();
		r.view.blankNodes.draw();
		r.controler = Controler(url, r);
		r.library = {gui: r};
		r.controler.init();
		r.logger = r.controler.initLogger(r.view.paper);

		$(function(){
			$(".plugin_"+r.id_postfix).css("padding-bottom", "10px")
		});

		// setTimeout("raport(A.view.convertGraphViewToXML(true))", 1500)

		return r;
	}

	// $("#form").dialog("open")


	var G = A.view.graph_view;

	var ontology_json = {data:'Thing', children: [{data:'_Communication', children: [{data:'Algorithm', children: [{data:'Amplification', children: []}, {data:'Authentication', children: []}, {data:'ChangeDetection', children: []}, {data:'Compression', children: []}, {data:'DecisionMaking', children: []}, {data:'Decoding', children: []}, {data:'Decryption', children: []}, {data:'DeNoising', children: []}, {data:'Encoding', children: []}, {data:'Encryption', children: []}, {data:'Merging', children: []}, {data:'Splitting', children: []}]}, {data:'AudioBitrate', children: []}, {data:'AudioBitrateType', children: [{data:'CBR', children: []}, {data:'VBR', children: [{data:'AverageBR', children: []}, {data:'OnOffBR', children: []}]}]}, {data:'AudioBitrateValue', children: [{data:'1100kb/s', children: []}, {data:'125kb/s', children: []}, {data:'690kb/s', children: []}]}, {data:'AudioType', children: [{data:'Monophonic', children: []}, {data:'Stereophonic', children: []}]}, {data:'Codec', children: [{data:'AudioCodec', children: [{data:'FLAC', children: []}, {data:'MP3', children: []}, {data:'PCM', children: []}]}, {data:'VideoCodec', children: [{data:'MPEG-1', children: []}, {data:'MPEG-2', children: []}, {data:'MPEG-4', children: [{data:'4K', children: []}, {data:'HighDefinition', children: []}, {data:'StandardDefinition', children: []}]}]}]}, {data:'ColorScheme', children: [{data:'BlackAndWhite', children: []}, {data:'RGB', children: []}]}, {data:'Data', children: [{data:'Message', children: [{data:'Character', children: []}, {data:'Image', children: []}, {data:'Number', children: []}]}, {data:'Stream', children: [{data:'Audio', children: []}, {data:'Video', children: []}]}]}, {data:'EncodingType', children: [{data:'Lossless', children: []}, {data:'Lossy', children: []}]}, {data:'ImageCompression', children: [{data:'ImageCompressionLossless', children: [{data:'BMP', children: []}, {data:'GIF', children: []}, {data:'PNG', children: []}, {data:'TIFF', children: []}]}, {data:'ImageCompressionLossy', children: [{data:'DCT', children: []}, {data:'JPEG', children: []}]}]}, {data:'MessageFormat', children: [{data:'CSV', children: []}, {data:'RTF', children: []}, {data:'TXT', children: []}, {data:'XLS', children: []}, {data:'XML', children: []}]}, {data:'Processing', children: [{data:'AudioProcessing', children: [{data:'SoundAnalysis', children: []}, {data:'SpeechReccognition', children: []}]}, {data:'DataProcessing', children: [{data:'Filtering', children: []}, {data:'StatisticalProcessing', children: []}]}, {data:'VideoProcessing', children: [{data:'BackgroundRecognition', children: []}, {data:'ColorsChange', children: []}, {data:'EdgeProcessing', children: []}, {data:'MotionTracking', children: []}]}]}, {data:'SamplingRate', children: []}, {data:'Sensor', children: [{data:'AnalogSensor', children: [{data:'HumiditySensor', children: []}, {data:'InsolationSensor', children: []}, {data:'TemperatureSensor', children: []}]}, {data:'AudioSensor', children: [{data:'Microphone', children: []}]}, {data:'DigitalSensor', children: [{data:'ChemicalSensor', children: []}, {data:'CO2Sensor', children: []}, {data:'MotionSensor', children: []}, {data:'NoiseSensor', children: []}, {data:'SmokeSensor', children: []}]}, {data:'VideoSensor', children: [{data:'Camcoder', children: []}]}]}, {data:'SensorOutput', children: []}, {data:'SensorStatus', children: [{data:'SensorError', children: []}, {data:'SensorOK', children: []}]}, {data:'Size', children: []}, {data:'VideoBitrate', children: []}, {data:'VideoBitrateValue', children: [{data:'1.5Mb/s', children: []}, {data:'100Mb/s', children: []}, {data:'15Mb/s', children: []}, {data:'16Mb/s', children: []}, {data:'200Mb/s', children: []}, {data:'40Mb/s', children: []}, {data:'4Mb/s', children: []}, {data:'56Mb/s', children: []}, {data:'60Mb/s', children: []}, {data:'768kb/s', children: []}, {data:'90Mb/s', children: []}]}]}, {data:'_Process', children: [{data:'Alert', children: [{data:'AlertAction', children: [{data:'InitiateAlert', children: []}, {data:'SendAlert', children: []}, {data:'SetAlertStatus', children: []}, {data:'SetAlertType', children: []}]}, {data:'AlertData', children: [{data:'AlertDataActions', children: [{data:'Aggregate', children: []}, {data:'Compress', children: []}, {data:'Convert', children: []}, {data:'Decompress', children: []}, {data:'Process', children: []}, {data:'Send', children: []}, {data:'SetParameters', children: []}, {data:'Store', children: []}]}, {data:'AlertID', children: []}, {data:'AlertObject', children: []}, {data:'AlertStatus', children: [{data:'AlertError', children: []}, {data:'AlertOK', children: []}, {data:'AlertProcessing', children: []}, {data:'ClientNotified', children: []}, {data:'MonitoringNotified', children: []}]}, {data:'AlertType', children: [{data:'High', children: []}, {data:'Low', children: []}]}, {data:'Timing', children: [{data:'Hrs18_6', children: []}, {data:'Hrs24', children: []}, {data:'Hrs6_18', children: []}]}]}]}, {data:'Client', children: [{data:'ClientData', children: [{data:'Firstname', children: []}, {data:'Phone', children: []}, {data:'Surname', children: []}]}]}, {data:'Object', children: [{data:'ObjectID', children: []}, {data:'ObjectLocation', children: [{data:'Address', children: []}, {data:'Area', children: []}, {data:'GPS', children: [{data:'EW', children: []}, {data:'NS', children: []}]}]}, {data:'ObjectOwner', children: []}, {data:'ObjectType', children: [{data:'Building', children: [{data:'House', children: []}, {data:'Laboratory', children: []}]}, {data:'Room', children: []}]}]}, {data:'Person', children: [{data:'PersonID', children: []}]}, {data:'Service', children: [{data:'ServiceLocation', children: [{data:'IP', children: []}, {data:'Port', children: []}]}]}]}]};


	// var tabb = [];
	// function m(obj, tab){
	// 	var str = Object.prototype.toString;
	// 	for(var i in obj){
	// 		if(obj.hasOwnProperty(i)){
	// 			alert(((obj.id+":")|| "")+tab+i+"\n")
	// 			if(str.call(obj[i]) === "[object Object]"){
	// 				m(obj[i], tab+"\t");
	// 			}
	// 		}
	// 	}
	// }
	// m(A, "");

	// m({
	// 	i: "",
	// 	j: "",
	// 	k: {
	// 		p: "",
	// 		LA: ""
	// 	}
	// }, "");

	// console.log(tabb.join(""))
</script>
<!--
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
-->
</body>
</html>