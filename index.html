<!DOCTYPE html>
<html>
<head>
	<META charset="UTF-8"/>
	<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
	<title>Interface</title>
	<script src="javascripts/jquery-1.7.2.js"></script>
	<script src="javascripts/jquery-ui-1.8.16.custom.min.js"></script>
	<script src="javascripts/raphael.js"></script>
	<script src="javascripts/shortcut.js"></script>
	<script src="javascripts/ontology.js"></script>
	<script src="library.js"></script>
	<script src="controler.js"></script>
	<script src="view.js"></script>
	<link href="stylesheets/my_style.css" rel="stylesheet">
	<link type="text/css" href="stylesheets/jquery-ui-1.8.19.custom.css" rel="stylesheet" />
	<style>
		#acc_inside{
			height: 200px;
		}
	</style>
</head>
<body>
	
<div id="sandbox" style="background-color:ivory;"> </div>
<div id="raport" style='clear: both; display:block;'> </div>
<div id="form" class="ui-dialog-content ui-widget-content" title="New SSDL node">
	<div id="tabs" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
		<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
			<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active" id="t1"><a href="#tabs-1">Main</a></li>
			<li id="t2"><a href="#tabs-2">Physical description</a></li>
			<li id="t3"><a href="#tabs-3">Functional description</a></li>
			<li id="t4"><a href="#tabs-4">Non-functional description</a></li>
		</ul>
		<div id="tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom">
			<p>
				<form id="mainForm">
					<table>
						<tr>
							<td><label for="label">Label: </label></td>
							<td><input type="text" name="label" id="label" value="" class="text ui-widget-content ui-corner-all"/></td>
						</tr>
						<tr>
							<td><label for="nodeType">NodeType: </label></td>
							<td><select style="width: 135px;" id="nodeType" class="ui-widget-content ui-corner-all ui-combobox">
								<option class="ui-widget ui-state-default" selected="selected">  </option>
								<option class="ui-widget ui-state-default" value="Control">Control</option>
								<option class="ui-widget ui-state-default" value="Functionality">Functionality</option>
								<option class="ui-widget ui-state-default" value="Mediator">Mediator</option>
								<option class="ui-widget ui-state-default" value="Service">Service</option>
							</select></td>
								
							<td><label for="controlType">ControlType: </label></td>
							<td><input type="text" name="controlType" id="controlType" value="" class="text ui-widget-content ui-corner-all"/></td>
						</tr>
						<tr>
							<td><label for="condition">Condition: if </label></td>
							<td><input type="text" name="condition" id="condition" value="" class="text ui-widget-content ui-corner-all"/></td>
							<td><label for="conditionTRUE">then </label></td>
							<td><input type="text" name="conditionTRUE" id="conditionTRUE" value="" class="text ui-widget-content ui-corner-all"/></td>
							<td><label for="conditionFALSE">else </label></td>
							<td><input type="text" name="conditionFALSE" id="conditionFALSE" value="" class="text ui-widget-content ui-corner-all"/></td>
						</tr>
						<!-- Alternatives, subgraph - jak to potraktowaÄ‡??? Feedback needed! -->
						<tr>
							</br></br><td><label for="alternatives">Alternatives: </label></td>
							<td><input type="text" name="alternatives" id="alternatives" value="" class="text ui-widget-content ui-corner-all"/></td>
						
							<!-- <td><label for="subgraph">Subgraph: </label></td>
							<td><input type="text" name="subgraph" id="subgraph" value="" class="text ui-widget-content ui-corner-all"/></td> -->
						</tr>
						<tr>
							<td><label for="source">Sources: </label></td>
							<td><input type="text" name="source" id="source" value="" class="text ui-widget-content ui-corner-all"/></td>
							<td><input type="submit" name="addSource" id="addSource" value="Add Source"/></td>
							<td><small>click on a source to delete it</small></td>
						</tr>
					</table>
					<span id="sources"></span>
				</form>
			</p>
		</div>
		<div id="tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom">
			<p>
				<form id="physDescForm">
					<table>
						<tr>
							<td><label for="serviceName">ServiceName: </label></td>
							<td><input type="text" name="serviceName" id="serviceName" value="" class="text ui-widget-content ui-corner-all"/></td>
						</tr>
						<tr>
							<td><label for="serviceGlobalId">ServiceGlobalId: </label></td>
							<td><input type="text" name="serviceGlobalId" id="serviceGlobalId" value="" class="text ui-widget-content ui-corner-all"/></td>
						</tr>
						<tr>
							<td><label for="address">Address: </label></td>
							<td><input type="text" name="address" id="address" value="" class="text ui-widget-content ui-corner-all"/></td>
						</tr>
						<tr>
							<td><label for="operation">Operation: </label></td>
							<td><input type="text" name="operation" id="operation" value="" class="text ui-widget-content ui-corner-all"/></td>
						</tr>
					</table>
				</form>
			</p>
		</div>
		<div id="tabs-3" class="ui-tabs-panel ui-widget-content ui-corner-bottom">
			<p>
				<form id="funcDescForm">
					<table>
						<tr>
							<td><label for="description">Description: </label></td>
							<td><input type="text" name="description" id="description" value="" class="text ui-widget-content ui-corner-all"/></td>
						</tr>
						<tr>
							<td><label for="serviceClass">Service Classes: </label></td>
							<td><input type="text" name="serviceClass" id="serviceClass" value="" class="text ui-widget-content ui-corner-all"/></td>
							<td><input type="submit" name="addServiceClass" id="addServiceClass" value="Add Service Class"/></td>
							<td><small>click on a service class to delete it</small></td>
						</tr>
					</table>
					<span id="sClasses"></span>
					<table>
						<tr>
							<td><label for="metaKeyword">Meta Keywords: </label></td>
							<td><input type="text" name="metaKeyword" id="metaKeyword" value="" class="text ui-widget-content ui-corner-all"/></td>
							<td><input type="submit" name="addMetaKeyword" id="addMetaKeyword" value="Add Meta Keyword"/></td>
							<td><small>click on a meta keyword to delete it</small></td>
						</tr>							
					</table>
				</form>
				<span id="mKeywords"></span>
				<div id="functional1">
					<h3><a href="#">Inputs</a></h3>
					<div id="acc_inside">
						<form id="inputForm">
							<table>
								<tr>
									<td><label for="inputNodeId">NodeId: </label></td>
									<td><input type="text" name="inputNodeId" id="inputNodeId" value="" class="text ui-widget-content ui-corner-all"/></td>
								
									<td><label for="inputLabel">Label: </label></td>
									<td><input type="text" name="inputLabel" id="inputLabel" value="" class="text ui-widget-content ui-corner-all"/></td>
								</tr>
								<tr>
									<td><label for="inputClass">Class: </label></td>
									<td><input type="text" name="inputClass" id="inputClass" value="" class="text ui-widget-content ui-corner-all"/></td>
									
									<td><label for="inputDataType">DataType: </label></td>
									<td><input type="text" name="inputDataType" id="inputDataType" value="" class="text ui-widget-content ui-corner-all"/></td>
								</tr>
								<tr>
									<td><label for="iProperties">Properties: </label></td>
									<td><input type="text" name="iProperties" id="iProperties" value="" class="text ui-widget-content ui-corner-all"/></td>
								</tr>
								<tr>
									<td><input type="submit" name="addInputButton" id="addInputButton" value="Add input"/></td>
									<td><input type="reset" name="clearInputButton" id="clearInputButton" value="Reset"/></td>
								</tr>
							</table>
						</form>
						<div id="inputs-content" class="ui-widget">
							<p>Defined inputs:</p>
							<table id="inputs" class="text ui-widget-content ui-corner-all">
								<thead>
									<tr class="ui-widget-header ">
										<th>NodeId</th>
										<th>Label</th>
										<th>Class</th>
										<th>DataType</th>
										<th>Properties</th>
										<th>Action</th>
									</tr>
								</thead>
								<tbody>
									<tr>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<div id="functional2">
					<h3><a href="#">Outputs</a></h3>
					<div id="acc_inside">
						<form id="outputForm">
							<table>
								<tr>
									<td><label for="outputNodeId">NodeId: </label></td>
									<td><input type="text" name="outputNodeId" id="outputNodeId" value="" class="text ui-widget-content ui-corner-all"/></td>
										
									<td><label for="outputLabel">Label: </label></td>
									<td><input type="text" name="outputLabel" id="outputLabel" value="" class="text ui-widget-content ui-corner-all"/></td>
								</tr>
								<tr>
									<td><label for="outputClass">Class: </label></td>
									<td><input type="text" name="outputClass" id="outputClass" value="" class="text ui-widget-content ui-corner-all"/></td>
								
									<td><label for="outputDataType">DataType: </label></td>
									<td><input type="text" name="outputDataType" id="outputDataType" value="" class="text ui-widget-content ui-corner-all"/></td>
								</tr>
								<tr>
									<td><label for="oProperties">Properties: </label></td>
									<td><input type="text" name="oProperties" id="oProperties" value="" class="text ui-widget-content ui-corner-all"/></td>
								</tr>
								<tr>
									<td><input type="submit" name="addInputButton" id="addOutputButton" value="Add output"/></td>
									<td><input type="reset" name="clearOutputButton" id="clearOutputButton" value="Reset"/></td>
								</tr>
							</table>
						</form>		
						<div id="outputs-content" class="ui-widget">
							<p>Defined outputs:</p>
							<table id="outputs" class="text ui-widget-content ui-corner-all">
								<thead>
									<tr class="ui-widget-header ">
										<th>NodeId</th>
										<th>Label</th>
										<th>Class</th>
										<th>DataType</th>
										<th>Properties</th>
										<th>Action</th>
									</tr>
								</thead>
								<tbody>
									<tr>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>	
				<table>
					<tr>
						<td><label for="prec">Preconditions: </label></td>
						<td><input type="text" name="prec" id="prec" value="" class="text ui-widget-content ui-corner-all"/></td>
							
						<td><label for="effects">Effects: </label></td>
						<td><input type="text" name="effects" id="effects" value="" class="text ui-widget-content ui-corner-all"/></td>
					</tr>
				</table>
			</p>
		</div>
		<div id="tabs-4" class="ui-tabs-panel ui-widget-content ui-corner-bottom">
			<form id="nonFuncDescForm">
				<table>
					<tr>
						<td><label for="weight">Weight:</label></td>
						<td><input type="text" name="weight" id="weight" value="" class="text ui-widget-content ui-corner-all"/></td>
					
						<td><label for="name">Name: </label></td>
						<td><input type="text" name="name" id="name" value="" class="text ui-widget-content ui-corner-all"/></td>
					</tr>
					<tr>
						<td><label for="relation">Relation: </label></td>
						<td><input type="text" name="relation" id="relation" value="" class="text ui-widget-content ui-corner-all"/></td>
							
						<td><label for="unit">Unit: </label></td>
						<td><input type="text" name="unit" id="unit" value="" class="text ui-widget-content ui-corner-all"/></td>
					</tr>
					<tr>
						<td><label for="value">Value: </label></td>
						<td><input type="text" name="value" id="value" value="" class="text ui-widget-content ui-corner-all"/></td>
					</tr>
				</table>
				<table>
					<tr>
						<td><input type="submit" name="addNonFunctional" id="addNonFunctional" value="Add nonfunctional property"/></td>
						<td><input type="reset" name="clearNonFunctional" id="clearNonFunctional" value="Reset"/></td>
					</tr>
				</table>
			</form>
			<div id="nonFunctionalProperties-content" class="ui-widget">
			<p>Defined Non Functional Properties:</p>
				<table id="NFProps" class="text ui-widget-content ui-corner-all">
					<thead>
						<tr class="ui-widget-header ">
							<th>Weight</th>
							<th>Name</th>
							<th>Relation</th>
							<th>Unit</th>
							<th>Value</th>
							<th>Action</th>
						</tr>
					</thead>
					<tbody>
						<tr>	
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<input type="submit" name="sumbitAllButton" id="sumbitAllButton" value="Submit all"/>
	<input type="reset" name="resetAllButton" id="resetAllButton" value="Reset all"/>
	<p id="buglist" color="red"><p/>
</div>

<script>
	"use strict";
	
	// pomocnicze skrĂłty
	var a = alert;
	var jstr = JSON.stringify;
	// eof pomocnicze skrĂłty

	var modules = ["historyTree", "blanks", "miniature", "subgraphTree", "repository"];
	var A = Graph_GUI("sandbox", 1200, 600, modules, "list.xml");

	function Graph_GUI(id, width, height, modules, url){
		var r = {};
		
		r.id_postfix = Math.round( Math.random() * 10e5 );
		r.view = View(id, width, height, r);
		r.view.blankNodes.draw();
		r.controler = Controler(url, r);
		r.library = {gui: r};
		r.controler.init();
		r.logger = r.controler.initLogger(r.view.paper);

		$(function(){
			$(".plugin_"+r.id_postfix).css("padding-bottom", "10px")
		});

		// setTimeout("raport(A.view.convertGraphViewToXML(true))", 1500)

		return r;
	}

	// $("#form").dialog("open")


	var G = A.view.graph_view;

	var ontology_json = {data:'Thing', children: [{data:'_Communication', children: [{data:'Algorithm', children: [{data:'Amplification', children: []}, {data:'Authentication', children: []}, {data:'ChangeDetection', children: []}, {data:'Compression', children: []}, {data:'DecisionMaking', children: []}, {data:'Decoding', children: []}, {data:'Decryption', children: []}, {data:'DeNoising', children: []}, {data:'Encoding', children: []}, {data:'Encryption', children: []}, {data:'Merging', children: []}, {data:'Splitting', children: []}]}, {data:'AudioBitrate', children: []}, {data:'AudioBitrateType', children: [{data:'CBR', children: []}, {data:'VBR', children: [{data:'AverageBR', children: []}, {data:'OnOffBR', children: []}]}]}, {data:'AudioBitrateValue', children: [{data:'1100kb/s', children: []}, {data:'125kb/s', children: []}, {data:'690kb/s', children: []}]}, {data:'AudioType', children: [{data:'Monophonic', children: []}, {data:'Stereophonic', children: []}]}, {data:'Codec', children: [{data:'AudioCodec', children: [{data:'FLAC', children: []}, {data:'MP3', children: []}, {data:'PCM', children: []}]}, {data:'VideoCodec', children: [{data:'MPEG-1', children: []}, {data:'MPEG-2', children: []}, {data:'MPEG-4', children: [{data:'4K', children: []}, {data:'HighDefinition', children: []}, {data:'StandardDefinition', children: []}]}]}]}, {data:'ColorScheme', children: [{data:'BlackAndWhite', children: []}, {data:'RGB', children: []}]}, {data:'Data', children: [{data:'Message', children: [{data:'Character', children: []}, {data:'Image', children: []}, {data:'Number', children: []}]}, {data:'Stream', children: [{data:'Audio', children: []}, {data:'Video', children: []}]}]}, {data:'EncodingType', children: [{data:'Lossless', children: []}, {data:'Lossy', children: []}]}, {data:'ImageCompression', children: [{data:'ImageCompressionLossless', children: [{data:'BMP', children: []}, {data:'GIF', children: []}, {data:'PNG', children: []}, {data:'TIFF', children: []}]}, {data:'ImageCompressionLossy', children: [{data:'DCT', children: []}, {data:'JPEG', children: []}]}]}, {data:'MessageFormat', children: [{data:'CSV', children: []}, {data:'RTF', children: []}, {data:'TXT', children: []}, {data:'XLS', children: []}, {data:'XML', children: []}]}, {data:'Processing', children: [{data:'AudioProcessing', children: [{data:'SoundAnalysis', children: []}, {data:'SpeechReccognition', children: []}]}, {data:'DataProcessing', children: [{data:'Filtering', children: []}, {data:'StatisticalProcessing', children: []}]}, {data:'VideoProcessing', children: [{data:'BackgroundRecognition', children: []}, {data:'ColorsChange', children: []}, {data:'EdgeProcessing', children: []}, {data:'MotionTracking', children: []}]}]}, {data:'SamplingRate', children: []}, {data:'Sensor', children: [{data:'AnalogSensor', children: [{data:'HumiditySensor', children: []}, {data:'InsolationSensor', children: []}, {data:'TemperatureSensor', children: []}]}, {data:'AudioSensor', children: [{data:'Microphone', children: []}]}, {data:'DigitalSensor', children: [{data:'ChemicalSensor', children: []}, {data:'CO2Sensor', children: []}, {data:'MotionSensor', children: []}, {data:'NoiseSensor', children: []}, {data:'SmokeSensor', children: []}]}, {data:'VideoSensor', children: [{data:'Camcoder', children: []}]}]}, {data:'SensorOutput', children: []}, {data:'SensorStatus', children: [{data:'SensorError', children: []}, {data:'SensorOK', children: []}]}, {data:'Size', children: []}, {data:'VideoBitrate', children: []}, {data:'VideoBitrateValue', children: [{data:'1.5Mb/s', children: []}, {data:'100Mb/s', children: []}, {data:'15Mb/s', children: []}, {data:'16Mb/s', children: []}, {data:'200Mb/s', children: []}, {data:'40Mb/s', children: []}, {data:'4Mb/s', children: []}, {data:'56Mb/s', children: []}, {data:'60Mb/s', children: []}, {data:'768kb/s', children: []}, {data:'90Mb/s', children: []}]}]}, {data:'_Process', children: [{data:'Alert', children: [{data:'AlertAction', children: [{data:'InitiateAlert', children: []}, {data:'SendAlert', children: []}, {data:'SetAlertStatus', children: []}, {data:'SetAlertType', children: []}]}, {data:'AlertData', children: [{data:'AlertDataActions', children: [{data:'Aggregate', children: []}, {data:'Compress', children: []}, {data:'Convert', children: []}, {data:'Decompress', children: []}, {data:'Process', children: []}, {data:'Send', children: []}, {data:'SetParameters', children: []}, {data:'Store', children: []}]}, {data:'AlertID', children: []}, {data:'AlertObject', children: []}, {data:'AlertStatus', children: [{data:'AlertError', children: []}, {data:'AlertOK', children: []}, {data:'AlertProcessing', children: []}, {data:'ClientNotified', children: []}, {data:'MonitoringNotified', children: []}]}, {data:'AlertType', children: [{data:'High', children: []}, {data:'Low', children: []}]}, {data:'Timing', children: [{data:'Hrs18_6', children: []}, {data:'Hrs24', children: []}, {data:'Hrs6_18', children: []}]}]}]}, {data:'Client', children: [{data:'ClientData', children: [{data:'Firstname', children: []}, {data:'Phone', children: []}, {data:'Surname', children: []}]}]}, {data:'Object', children: [{data:'ObjectID', children: []}, {data:'ObjectLocation', children: [{data:'Address', children: []}, {data:'Area', children: []}, {data:'GPS', children: [{data:'EW', children: []}, {data:'NS', children: []}]}]}, {data:'ObjectOwner', children: []}, {data:'ObjectType', children: [{data:'Building', children: [{data:'House', children: []}, {data:'Laboratory', children: []}]}, {data:'Room', children: []}]}]}, {data:'Person', children: [{data:'PersonID', children: []}]}, {data:'Service', children: [{data:'ServiceLocation', children: [{data:'IP', children: []}, {data:'Port', children: []}]}]}]}]};


	// var tabb = [];
	// function m(obj, tab){
	// 	var str = Object.prototype.toString;
	// 	for(var i in obj){
	// 		if(obj.hasOwnProperty(i)){
	// 			alert(((obj.id+":")|| "")+tab+i+"\n")
	// 			if(str.call(obj[i]) === "[object Object]"){
	// 				m(obj[i], tab+"\t");
	// 			}
	// 		}
	// 	}
	// }
	// m(A, "");

	// m({
	// 	i: "",
	// 	j: "",
	// 	k: {
	// 		p: "",
	// 		LA: ""
	// 	}
	// }, "");

	// console.log(tabb.join(""))
</script>
<!--
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
-->
</body>
</html>