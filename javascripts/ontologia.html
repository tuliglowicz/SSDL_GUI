<span style='display:none'>
<atomicservices>
    <class_types>
        <value>ConceptsArray</value>
    </class_types>
    <class_types>
        <value>Integer</value>
    </class_types>
    <class_types>
        <value>ServiceDescription</value>
    </class_types>
    <class_types>
        <value>ServiceDescriptionArray</value>
    </class_types>
    <class_types>
        <value>Thing</value>
    </class_types>
    <class_types>
        <value>_Communication</value>
        <parent_value>Thing</parent_value>
    </class_types>
    <class_types>
        <value>_Process</value>
        <parent_value>Thing</parent_value>
    </class_types>
    <class_types>
        <value>Algorithm</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>AudioBitrate</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>AudioBitrateType</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>AudioBitrateValue</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>AudioType</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>Codec</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>ColorScheme</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>Data</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>EncodingType</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>ImageCompression</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>MessageFormat</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>Processing</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>SamplingRate</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>Sensor</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>SensorOutput</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>SensorStatus</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>Size</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>VideoBitrate</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>VideoBitrateValue</value>
        <parent_value>_Communication</parent_value>
    </class_types>
    <class_types>
        <value>Alert</value>
        <parent_value>_Process</parent_value>
    </class_types>
    <class_types>
        <value>Client</value>
        <parent_value>_Process</parent_value>
    </class_types>
    <class_types>
        <value>Object</value>
        <parent_value>_Process</parent_value>
    </class_types>
    <class_types>
        <value>Person</value>
        <parent_value>_Process</parent_value>
    </class_types>
    <class_types>
        <value>Service</value>
        <parent_value>_Process</parent_value>
    </class_types>
    <class_types>
        <value>AlertAction</value>
        <parent_value>Alert</parent_value>
    </class_types>
    <class_types>
        <value>AlertData</value>
        <parent_value>Alert</parent_value>
    </class_types>
    <class_types>
        <value>InitiateAlert</value>
        <parent_value>AlertAction</parent_value>
    </class_types>
    <class_types>
        <value>SendAlert</value>
        <parent_value>AlertAction</parent_value>
    </class_types>
    <class_types>
        <value>SetAlertStatus</value>
        <parent_value>AlertAction</parent_value>
    </class_types>
    <class_types>
        <value>SetAlertType</value>
        <parent_value>AlertAction</parent_value>
    </class_types>
    <class_types>
        <value>AlertDataActions</value>
        <parent_value>AlertData</parent_value>
    </class_types>
    <class_types>
        <value>AlertID</value>
        <parent_value>AlertData</parent_value>
    </class_types>
    <class_types>
        <value>AlertObject</value>
        <parent_value>AlertData</parent_value>
    </class_types>
    <class_types>
        <value>AlertStatus</value>
        <parent_value>AlertData</parent_value>
    </class_types>
    <class_types>
        <value>AlertType</value>
        <parent_value>AlertData</parent_value>
    </class_types>
    <class_types>
        <value>Timing</value>
        <parent_value>AlertData</parent_value>
    </class_types>
    <class_types>
        <value>Aggregate</value>
        <parent_value>AlertDataActions</parent_value>
    </class_types>
    <class_types>
        <value>Compress</value>
        <parent_value>AlertDataActions</parent_value>
    </class_types>
    <class_types>
        <value>Convert</value>
        <parent_value>AlertDataActions</parent_value>
    </class_types>
    <class_types>
        <value>Decompress</value>
        <parent_value>AlertDataActions</parent_value>
    </class_types>
    <class_types>
        <value>Process</value>
        <parent_value>AlertDataActions</parent_value>
    </class_types>
    <class_types>
        <value>Send</value>
        <parent_value>AlertDataActions</parent_value>
    </class_types>
    <class_types>
        <value>SetParameters</value>
        <parent_value>AlertDataActions</parent_value>
    </class_types>
    <class_types>
        <value>Store</value>
        <parent_value>AlertDataActions</parent_value>
    </class_types>
    <class_types>
        <value>AlertError</value>
        <parent_value>AlertStatus</parent_value>
    </class_types>
    <class_types>
        <value>AlertOK</value>
        <parent_value>AlertStatus</parent_value>
    </class_types>
    <class_types>
        <value>AlertProcessing</value>
        <parent_value>AlertStatus</parent_value>
    </class_types>
    <class_types>
        <value>ClientNotified</value>
        <parent_value>AlertStatus</parent_value>
    </class_types>
    <class_types>
        <value>MonitoringNotified</value>
        <parent_value>AlertStatus</parent_value>
    </class_types>
    <class_types>
        <value>High</value>
        <parent_value>AlertType</parent_value>
    </class_types>
    <class_types>
        <value>Low</value>
        <parent_value>AlertType</parent_value>
    </class_types>
    <class_types>
        <value>Amplification</value>
        <parent_value>Algorithm</parent_value>
    </class_types>
    <class_types>
        <value>Authentication</value>
        <parent_value>Algorithm</parent_value>
    </class_types>
    <class_types>
        <value>ChangeDetection</value>
        <parent_value>Algorithm</parent_value>
    </class_types>
    <class_types>
        <value>Compression</value>
        <parent_value>Algorithm</parent_value>
    </class_types>
    <class_types>
        <value>DecisionMaking</value>
        <parent_value>Algorithm</parent_value>
    </class_types>
    <class_types>
        <value>Decoding</value>
        <parent_value>Algorithm</parent_value>
    </class_types>
    <class_types>
        <value>Decryption</value>
        <parent_value>Algorithm</parent_value>
    </class_types>
    <class_types>
        <value>DeNoising</value>
        <parent_value>Algorithm</parent_value>
    </class_types>
    <class_types>
        <value>Encoding</value>
        <parent_value>Algorithm</parent_value>
    </class_types>
    <class_types>
        <value>Encryption</value>
        <parent_value>Algorithm</parent_value>
    </class_types>
    <class_types>
        <value>Merging</value>
        <parent_value>Algorithm</parent_value>
    </class_types>
    <class_types>
        <value>Splitting</value>
        <parent_value>Algorithm</parent_value>
    </class_types>
    <class_types>
        <value>HumiditySensor</value>
        <parent_value>AnalogSensor</parent_value>
    </class_types>
    <class_types>
        <value>InsolationSensor</value>
        <parent_value>AnalogSensor</parent_value>
    </class_types>
    <class_types>
        <value>TemperatureSensor</value>
        <parent_value>AnalogSensor</parent_value>
    </class_types>
    <class_types>
        <value>CBR</value>
        <parent_value>AudioBitrateType</parent_value>
    </class_types>
    <class_types>
        <value>VBR</value>
        <parent_value>AudioBitrateType</parent_value>
    </class_types>
    <class_types>
        <value>1100kb/s</value>
        <parent_value>AudioBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>125kb/s</value>
        <parent_value>AudioBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>690kb/s</value>
        <parent_value>AudioBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>FLAC</value>
        <parent_value>AudioCodec</parent_value>
    </class_types>
    <class_types>
        <value>MP3</value>
        <parent_value>AudioCodec</parent_value>
    </class_types>
    <class_types>
        <value>PCM</value>
        <parent_value>AudioCodec</parent_value>
    </class_types>
    <class_types>
        <value>SoundAnalysis</value>
        <parent_value>AudioProcessing</parent_value>
    </class_types>
    <class_types>
        <value>SpeechReccognition</value>
        <parent_value>AudioProcessing</parent_value>
    </class_types>
    <class_types>
        <value>Microphone</value>
        <parent_value>AudioSensor</parent_value>
    </class_types>
    <class_types>
        <value>Monophonic</value>
        <parent_value>AudioType</parent_value>
    </class_types>
    <class_types>
        <value>Stereophonic</value>
        <parent_value>AudioType</parent_value>
    </class_types>
    <class_types>
        <value>House</value>
        <parent_value>Building</parent_value>
    </class_types>
    <class_types>
        <value>Laboratory</value>
        <parent_value>Building</parent_value>
    </class_types>
    <class_types>
        <value>ClientData</value>
        <parent_value>Client</parent_value>
    </class_types>
    <class_types>
        <value>Firstname</value>
        <parent_value>ClientData</parent_value>
    </class_types>
    <class_types>
        <value>Phone</value>
        <parent_value>ClientData</parent_value>
    </class_types>
    <class_types>
        <value>Surname</value>
        <parent_value>ClientData</parent_value>
    </class_types>
    <class_types>
        <value>AudioCodec</value>
        <parent_value>Codec</parent_value>
    </class_types>
    <class_types>
        <value>VideoCodec</value>
        <parent_value>Codec</parent_value>
    </class_types>
    <class_types>
        <value>BlackAndWhite</value>
        <parent_value>ColorScheme</parent_value>
    </class_types>
    <class_types>
        <value>RGB</value>
        <parent_value>ColorScheme</parent_value>
    </class_types>
    <class_types>
        <value>Message</value>
        <parent_value>Data</parent_value>
    </class_types>
    <class_types>
        <value>Stream</value>
        <parent_value>Data</parent_value>
    </class_types>
    <class_types>
        <value>Filtering</value>
        <parent_value>DataProcessing</parent_value>
    </class_types>
    <class_types>
        <value>StatisticalProcessing</value>
        <parent_value>DataProcessing</parent_value>
    </class_types>
    <class_types>
        <value>ChemicalSensor</value>
        <parent_value>DigitalSensor</parent_value>
    </class_types>
    <class_types>
        <value>CO2Sensor</value>
        <parent_value>DigitalSensor</parent_value>
    </class_types>
    <class_types>
        <value>MotionSensor</value>
        <parent_value>DigitalSensor</parent_value>
    </class_types>
    <class_types>
        <value>NoiseSensor</value>
        <parent_value>DigitalSensor</parent_value>
    </class_types>
    <class_types>
        <value>SmokeSensor</value>
        <parent_value>DigitalSensor</parent_value>
    </class_types>
    <class_types>
        <value>Lossless</value>
        <parent_value>EncodingType</parent_value>
    </class_types>
    <class_types>
        <value>Lossy</value>
        <parent_value>EncodingType</parent_value>
    </class_types>
    <class_types>
        <value>EW</value>
        <parent_value>GPS</parent_value>
    </class_types>
    <class_types>
        <value>NS</value>
        <parent_value>GPS</parent_value>
    </class_types>
    <class_types>
        <value>ImageCompressionLossless</value>
        <parent_value>ImageCompression</parent_value>
    </class_types>
    <class_types>
        <value>ImageCompressionLossy</value>
        <parent_value>ImageCompression</parent_value>
    </class_types>
    <class_types>
        <value>BMP</value>
        <parent_value>ImageCompressionLossless</parent_value>
    </class_types>
    <class_types>
        <value>GIF</value>
        <parent_value>ImageCompressionLossless</parent_value>
    </class_types>
    <class_types>
        <value>PNG</value>
        <parent_value>ImageCompressionLossless</parent_value>
    </class_types>
    <class_types>
        <value>TIFF</value>
        <parent_value>ImageCompressionLossless</parent_value>
    </class_types>
    <class_types>
        <value>DCT</value>
        <parent_value>ImageCompressionLossy</parent_value>
    </class_types>
    <class_types>
        <value>JPEG</value>
        <parent_value>ImageCompressionLossy</parent_value>
    </class_types>
    <class_types>
        <value>Character</value>
        <parent_value>Message</parent_value>
    </class_types>
    <class_types>
        <value>Image</value>
        <parent_value>Message</parent_value>
    </class_types>
    <class_types>
        <value>Number</value>
        <parent_value>Message</parent_value>
    </class_types>
    <class_types>
        <value>CSV</value>
        <parent_value>MessageFormat</parent_value>
    </class_types>
    <class_types>
        <value>RTF</value>
        <parent_value>MessageFormat</parent_value>
    </class_types>
    <class_types>
        <value>TXT</value>
        <parent_value>MessageFormat</parent_value>
    </class_types>
    <class_types>
        <value>XLS</value>
        <parent_value>MessageFormat</parent_value>
    </class_types>
    <class_types>
        <value>XML</value>
        <parent_value>MessageFormat</parent_value>
    </class_types>
    <class_types>
        <value>4K</value>
        <parent_value>MPEG-4</parent_value>
    </class_types>
    <class_types>
        <value>HighDefinition</value>
        <parent_value>MPEG-4</parent_value>
    </class_types>
    <class_types>
        <value>StandardDefinition</value>
        <parent_value>MPEG-4</parent_value>
    </class_types>
    <class_types>
        <value>ObjectID</value>
        <parent_value>Object</parent_value>
    </class_types>
    <class_types>
        <value>ObjectLocation</value>
        <parent_value>Object</parent_value>
    </class_types>
    <class_types>
        <value>ObjectOwner</value>
        <parent_value>Object</parent_value>
    </class_types>
    <class_types>
        <value>ObjectType</value>
        <parent_value>Object</parent_value>
    </class_types>
    <class_types>
        <value>Address</value>
        <parent_value>ObjectLocation</parent_value>
    </class_types>
    <class_types>
        <value>Area</value>
        <parent_value>ObjectLocation</parent_value>
    </class_types>
    <class_types>
        <value>GPS</value>
        <parent_value>ObjectLocation</parent_value>
    </class_types>
    <class_types>
        <value>Building</value>
        <parent_value>ObjectType</parent_value>
    </class_types>
    <class_types>
        <value>Room</value>
        <parent_value>ObjectType</parent_value>
    </class_types>
    <class_types>
        <value>PersonID</value>
        <parent_value>Person</parent_value>
    </class_types>
    <class_types>
        <value>AudioProcessing</value>
        <parent_value>Processing</parent_value>
    </class_types>
    <class_types>
        <value>DataProcessing</value>
        <parent_value>Processing</parent_value>
    </class_types>
    <class_types>
        <value>VideoProcessing</value>
        <parent_value>Processing</parent_value>
    </class_types>
    <class_types>
        <value>AnalogSensor</value>
        <parent_value>Sensor</parent_value>
    </class_types>
    <class_types>
        <value>AudioSensor</value>
        <parent_value>Sensor</parent_value>
    </class_types>
    <class_types>
        <value>DigitalSensor</value>
        <parent_value>Sensor</parent_value>
    </class_types>
    <class_types>
        <value>VideoSensor</value>
        <parent_value>Sensor</parent_value>
    </class_types>
    <class_types>
        <value>SensorError</value>
        <parent_value>SensorStatus</parent_value>
    </class_types>
    <class_types>
        <value>SensorOK</value>
        <parent_value>SensorStatus</parent_value>
    </class_types>
    <class_types>
        <value>ServiceLocation</value>
        <parent_value>Service</parent_value>
    </class_types>
    <class_types>
        <value>IP</value>
        <parent_value>ServiceLocation</parent_value>
    </class_types>
    <class_types>
        <value>Port</value>
        <parent_value>ServiceLocation</parent_value>
    </class_types>
    <class_types>
        <value>Audio</value>
        <parent_value>Stream</parent_value>
    </class_types>
    <class_types>
        <value>Video</value>
        <parent_value>Stream</parent_value>
    </class_types>
    <class_types>
        <value>Hrs18_6</value>
        <parent_value>Timing</parent_value>
    </class_types>
    <class_types>
        <value>Hrs24</value>
        <parent_value>Timing</parent_value>
    </class_types>
    <class_types>
        <value>Hrs6_18</value>
        <parent_value>Timing</parent_value>
    </class_types>
    <class_types>
        <value>AverageBR</value>
        <parent_value>VBR</parent_value>
    </class_types>
    <class_types>
        <value>OnOffBR</value>
        <parent_value>VBR</parent_value>
    </class_types>
    <class_types>
        <value>1.5Mb/s</value>
        <parent_value>VideoBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>100Mb/s</value>
        <parent_value>VideoBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>15Mb/s</value>
        <parent_value>VideoBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>16Mb/s</value>
        <parent_value>VideoBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>200Mb/s</value>
        <parent_value>VideoBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>40Mb/s</value>
        <parent_value>VideoBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>4Mb/s</value>
        <parent_value>VideoBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>56Mb/s</value>
        <parent_value>VideoBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>60Mb/s</value>
        <parent_value>VideoBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>768kb/s</value>
        <parent_value>VideoBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>90Mb/s</value>
        <parent_value>VideoBitrateValue</parent_value>
    </class_types>
    <class_types>
        <value>MPEG-1</value>
        <parent_value>VideoCodec</parent_value>
    </class_types>
    <class_types>
        <value>MPEG-2</value>
        <parent_value>VideoCodec</parent_value>
    </class_types>
    <class_types>
        <value>MPEG-4</value>
        <parent_value>VideoCodec</parent_value>
    </class_types>
    <class_types>
        <value>BackgroundRecognition</value>
        <parent_value>VideoProcessing</parent_value>
    </class_types>
    <class_types>
        <value>ColorsChange</value>
        <parent_value>VideoProcessing</parent_value>
    </class_types>
    <class_types>
        <value>EdgeProcessing</value>
        <parent_value>VideoProcessing</parent_value>
    </class_types>
    <class_types>
        <value>MotionTracking</value>
        <parent_value>VideoProcessing</parent_value>
    </class_types>
    <class_types>
        <value>Camcoder</value>
        <parent_value>VideoSensor</parent_value>
    </class_types>
</atomicservices>

<hr>

<script src="jquery-1.6.2.min.js"></script>
<script src="jquery.jstree.js"></script>
</span>
<span id="tu"></span>
<span id="tutaj"></span>

<script>
var my_js_on = {data:'Thing', children: [{data:'_Communication', children: [{data:'Algorithm', children: [{data:'Amplification', children: []}, {data:'Authentication', children: []}, {data:'ChangeDetection', children: []}, {data:'Compression', children: []}, {data:'DecisionMaking', children: []}, {data:'Decoding', children: []}, {data:'Decryption', children: []}, {data:'DeNoising', children: []}, {data:'Encoding', children: []}, {data:'Encryption', children: []}, {data:'Merging', children: []}, {data:'Splitting', children: []}]}, {data:'AudioBitrate', children: []}, {data:'AudioBitrateType', children: [{data:'CBR', children: []}, {data:'VBR', children: [{data:'AverageBR', children: []}, {data:'OnOffBR', children: []}]}]}, {data:'AudioBitrateValue', children: [{data:'1100kb/s', children: []}, {data:'125kb/s', children: []}, {data:'690kb/s', children: []}]}, {data:'AudioType', children: [{data:'Monophonic', children: []}, {data:'Stereophonic', children: []}]}, {data:'Codec', children: [{data:'AudioCodec', children: [{data:'FLAC', children: []}, {data:'MP3', children: []}, {data:'PCM', children: []}]}, {data:'VideoCodec', children: [{data:'MPEG-1', children: []}, {data:'MPEG-2', children: []}, {data:'MPEG-4', children: [{data:'4K', children: []}, {data:'HighDefinition', children: []}, {data:'StandardDefinition', children: []}]}]}]}, {data:'ColorScheme', children: [{data:'BlackAndWhite', children: []}, {data:'RGB', children: []}]}, {data:'Data', children: [{data:'Message', children: [{data:'Character', children: []}, {data:'Image', children: []}, {data:'Number', children: []}]}, {data:'Stream', children: [{data:'Audio', children: []}, {data:'Video', children: []}]}]}, {data:'EncodingType', children: [{data:'Lossless', children: []}, {data:'Lossy', children: []}]}, {data:'ImageCompression', children: [{data:'ImageCompressionLossless', children: [{data:'BMP', children: []}, {data:'GIF', children: []}, {data:'PNG', children: []}, {data:'TIFF', children: []}]}, {data:'ImageCompressionLossy', children: [{data:'DCT', children: []}, {data:'JPEG', children: []}]}]}, {data:'MessageFormat', children: [{data:'CSV', children: []}, {data:'RTF', children: []}, {data:'TXT', children: []}, {data:'XLS', children: []}, {data:'XML', children: []}]}, {data:'Processing', children: [{data:'AudioProcessing', children: [{data:'SoundAnalysis', children: []}, {data:'SpeechReccognition', children: []}]}, {data:'DataProcessing', children: [{data:'Filtering', children: []}, {data:'StatisticalProcessing', children: []}]}, {data:'VideoProcessing', children: [{data:'BackgroundRecognition', children: []}, {data:'ColorsChange', children: []}, {data:'EdgeProcessing', children: []}, {data:'MotionTracking', children: []}]}]}, {data:'SamplingRate', children: []}, {data:'Sensor', children: [{data:'AnalogSensor', children: [{data:'HumiditySensor', children: []}, {data:'InsolationSensor', children: []}, {data:'TemperatureSensor', children: []}]}, {data:'AudioSensor', children: [{data:'Microphone', children: []}]}, {data:'DigitalSensor', children: [{data:'ChemicalSensor', children: []}, {data:'CO2Sensor', children: []}, {data:'MotionSensor', children: []}, {data:'NoiseSensor', children: []}, {data:'SmokeSensor', children: []}]}, {data:'VideoSensor', children: [{data:'Camcoder', children: []}]}]}, {data:'SensorOutput', children: []}, {data:'SensorStatus', children: [{data:'SensorError', children: []}, {data:'SensorOK', children: []}]}, {data:'Size', children: []}, {data:'VideoBitrate', children: []}, {data:'VideoBitrateValue', children: [{data:'1.5Mb/s', children: []}, {data:'100Mb/s', children: []}, {data:'15Mb/s', children: []}, {data:'16Mb/s', children: []}, {data:'200Mb/s', children: []}, {data:'40Mb/s', children: []}, {data:'4Mb/s', children: []}, {data:'56Mb/s', children: []}, {data:'60Mb/s', children: []}, {data:'768kb/s', children: []}, {data:'90Mb/s', children: []}]}]}, {data:'_Process', children: [{data:'Alert', children: [{data:'AlertAction', children: [{data:'InitiateAlert', children: []}, {data:'SendAlert', children: []}, {data:'SetAlertStatus', children: []}, {data:'SetAlertType', children: []}]}, {data:'AlertData', children: [{data:'AlertDataActions', children: [{data:'Aggregate', children: []}, {data:'Compress', children: []}, {data:'Convert', children: []}, {data:'Decompress', children: []}, {data:'Process', children: []}, {data:'Send', children: []}, {data:'SetParameters', children: []}, {data:'Store', children: []}]}, {data:'AlertID', children: []}, {data:'AlertObject', children: []}, {data:'AlertStatus', children: [{data:'AlertError', children: []}, {data:'AlertOK', children: []}, {data:'AlertProcessing', children: []}, {data:'ClientNotified', children: []}, {data:'MonitoringNotified', children: []}]}, {data:'AlertType', children: [{data:'High', children: []}, {data:'Low', children: []}]}, {data:'Timing', children: [{data:'Hrs18_6', children: []}, {data:'Hrs24', children: []}, {data:'Hrs6_18', children: []}]}]}]}, {data:'Client', children: [{data:'ClientData', children: [{data:'Firstname', children: []}, {data:'Phone', children: []}, {data:'Surname', children: []}]}]}, {data:'Object', children: [{data:'ObjectID', children: []}, {data:'ObjectLocation', children: [{data:'Address', children: []}, {data:'Area', children: []}, {data:'GPS', children: [{data:'EW', children: []}, {data:'NS', children: []}]}]}, {data:'ObjectOwner', children: []}, {data:'ObjectType', children: [{data:'Building', children: [{data:'House', children: []}, {data:'Laboratory', children: []}]}, {data:'Room', children: []}]}]}, {data:'Person', children: [{data:'PersonID', children: []}]}, {data:'Service', children: [{data:'ServiceLocation', children: [{data:'IP', children: []}, {data:'Port', children: []}]}]}]}]};

Array.prototype.print = function()
{
	var str = "empty";
	if(this.length > 0){
		str=this[0];
		for(var i=1; i<this.length; i++)
			str += ", "+this[i];
	}
	return "<b>"+str+"</b>";
}
Array.prototype.keep_searching = function(v,p)
{
	if(this.length > 0){
		for(var i=0; i<this.length; i++)
			addHelper(v, p, this[i]);
	}
	return ;
}

var t, v, p;
var byt = {};
var arr = new Array();
var tab = new Array();

$(document).ready(function(){
	
	var tmp;
	var len = document.body.children.length;
	for(i=0; i<len; i++){
		tmp = document.body.children[i]
		if(tmp != undefined && tmp.nodeName == "DIV" && tmp.id != "vakata-contextmenu"){
			tmp.parentNode.removeChild(tmp);
		}
	}
	$("class_types").each(function(i, j){
		t = $(this);
		v = t.find("value").text();
		p = t.find("parent_value").text();
		
		if(i>3)
			arr.push([v, p]);
			//add(v, p);
	});
		
	//for(i = 0; i< arr.length; i++)
	//	document.getElementById("tu").innerHTML += arr[i][0]+" - "+arr[i][1]+"<br>"
		
	for(j = arr.length - 1; j>=0 ; --j)
	{
		tmp = arr[j]
		i = find(tmp[1])
		
		if(i == undefined)
			tab.push({data: tmp[1], children: [tmp[0]]});
		else
			tab[i].children.push(tmp[0]);
			
	//	alert(tab[i].data+":"+tab[i].children.print())
	}
	
	//document.getElementById("tu").innerHTML += "<hr>"
	//for(i = 0; i< tab.length; i++)
	//	document.getElementById("tu").innerHTML += "<span class='lol'>"+tab[i].data+"</span> - "+tab[i].children.print()+"<br>"
		
	//alert(tab[find("Object")].children.print());
	
	$(".lol").click(function(){
		try{
			alert(tab[find(this.textContent)].children.print());
		} catch(e){}
	})
	
	for(i = 0; i< arr.length; i++)
		t[arr[i][0]] = {data: arr[i][0], children: []}
		
	//for(i = 0; i< arr.length; i++)		if(arr[i][0] != "Thing")			add(arr[i][0], arr[i][1])

		$(function () {
		    $("#tu").jstree({
		        "json_data" : {
		            "data" : my_js_on
		        },
		        "themes" : {
		        	"theme" : "default",
		        	"dots" : true,
		        	"icons" : false		        	
		        },
		        "plugins" : [ "themes", "json_data", "ui", "crrm", "contextmenu", "checkbox" ]
		    });//.bind("select_node.jstree", function (e, data) { alert(data.rslt.obj.data("id")); });
		});

		//if(i == arr.length)			json2string(js_on);
});


function find(name){
	//alert(arr.length+":"+name);
	for(i = 0; i < tab.length; i++)
		if(tab[i].data == name)
			return i;
	
	return undefined;
}

var js_on = {data: "Thing", children: []};
var flag = true, f;
var t = new Array();
var kolejka = new Array();
function add(val, parent){
	f = false
	if(t[val] != undefined){
		val = t[val];
		t[val] = undefined;
		f = true;
	}
	flag = true;
	addHelper(val, parent, f, js_on);
	if(flag){
		if(t[parent] != undefined)
			t[parent].children.push(val)
		else
			t[parent] = {data: parent, children: [val]};
	}		
}
function addHelper(val, parent, f, js){
	document.getElementById("tu").innerHTML += "addHelper("+val.data+", "+parent+", -js) // js.children = <br/>";
	if(flag && js != undefined){
		if(js.data == parent){
			flag = false;
			js.children.push(val);
			document.getElementById("tu").innerHTML += val+" - "+parent+" OK!!!</br>";
		}
		else {
			js.children.keep_searching(val, parent, f);
			document.getElementById("tu").innerHTML += "---</i><br/>"
		}
	}
}

function json2string(js){
	//p = js
	//for(var i in p)	if(!$.isFunction(p[i])) alert(i+":"+p[i]);
	document.write(js2strHelper(js, 0));
}
function js2strHelper(js, c){
	str = "{data:'"+js.data+"', children: [";
	if(js.children.length > 0)
		str += js2strHelper(js.children[0], c+1);
		$.each(js.children, function(i, v){
			if(i>0){
				//alert(js.data+" - "+i+"/"+js.children.length+" - depth: "+c);
				str += ", "+js2strHelper(v, c+1);
			}
		})
			
	str += "]}";
	return str;
}

</script>


